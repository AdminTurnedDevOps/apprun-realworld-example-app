!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return E}));class r{constructor(){this._events={}}on(e,t,n={}){this._events[e]=this._events[e]||[],this._events[e].push({fn:t,options:n})}off(e,t){let n=this._events[e];n&&((n=n.filter(e=>e.fn!==t)).length?this._events[e]=n:delete this._events[e])}run(e,...t){let n=this._events[e];return console.assert(!!n,"No subscriber for event: "+e),n&&((n=n.filter(n=>{const{fn:r,options:s}=n;return s.delay?this.delay(e,r,t,s):r.apply(this,t),!n.options.once})).length?this._events[e]=n:delete this._events[e]),n?n.length:0}once(e,t,n={}){this.on(e,t,Object.assign({},n,{once:!0}))}delay(e,t,n,r){r._t&&clearTimeout(r._t),r._t=setTimeout(()=>{clearTimeout(r._t),t.apply(this,n)},r.delay)}}let s;const a="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e;a.app&&a._AppRunVersions?s=a.app:(s=new r,a.app=s,a._AppRunVersions="AppRun-2");var i=s;let o=0;const l="_props";function c(e){const t=[],n=e=>{null!=e&&""!==e&&!1!==e&&t.push("function"==typeof e||"object"==typeof e?e:`${e}`)};return e&&e.forEach(e=>{Array.isArray(e)?e.forEach(e=>n(e)):n(e)}),t}const u={},m=function(e,t,n={}){null!=t&&(t=function e(t,n,r=0){if(0===r&&(o=0),"string"==typeof t)return t;if(Array.isArray(t))return t.map(t=>e(t,n,o));let s=t;return t&&"function"==typeof t.tag&&Object.getPrototypeOf(t.tag).t&&(s=function(e,t,n){const{tag:r,props:s,children:a}=e;let o=`_${n}`,l=s&&s.id;l?o=l:l=`_${n}${Date.now()}`,t.s||(t.s={});let c=t.s[o];c?l=c.i:(c=t.s[o]=new r(Object.assign({},s,{children:a})).mount(l)).i=l,c.mounted&&c.mounted(s,a);const u=c.state;let m="";return u instanceof Promise||!c.view||(m=c._view(u,s),c.rendered&&setTimeout(()=>c.rendered(u,s))),i.createElement("section",Object.assign({},s,{id:l}),m)}(t,n,o++)),s&&Array.isArray(s.children)&&(s.children=s.children.map(t=>e(t,n,o))),s}(t,n),e&&(Array.isArray(t)?p(e,t):p(e,[t])))};function h(e,t){console.assert(!!e),function(e,t){const n=e.nodeName,r=`${t.tag||""}`;return n.toUpperCase()===r.toUpperCase()}(e,t)?(p(e,t.children),f(e,t.props)):e.parentNode.replaceChild(g(t),e)}function p(e,t){const n=Math.min(e.childNodes.length,t.length);for(let r=0;r<n;r++){const n=t[r],s=e.childNodes[r];if(n instanceof HTMLElement)e.insertBefore(n,s);else if("string"==typeof n)s.textContent!==n&&(3===s.nodeType?s.textContent=n:e.replaceChild(d(n),s));else{const t=n.props&&n.props.key;if(t)if(s.key===t)h(e.childNodes[r],n);else{const a=u[t];a?(e.insertBefore(a,s),e.appendChild(s),h(e.childNodes[r],n)):e.insertBefore(g(n),s)}else h(e.childNodes[r],n)}}let r=e.childNodes.length;for(;r>n;)e.removeChild(e.lastChild),r--;if(t.length>n){const r=document.createDocumentFragment();for(let e=n;e<t.length;e++)r.appendChild(g(t[e]));e.appendChild(r)}}function d(e){if(0===e.indexOf("_html:")){const t=document.createElement("div");return t.insertAdjacentHTML("afterbegin",e.substring(6)),t}return document.createTextNode(e)}function g(e,t=!1){if(console.assert(null!=e),e instanceof HTMLElement||e instanceof SVGElement)return e;if("string"==typeof e)return d(e);if(!e.tag||"function"==typeof e.tag)return d(JSON.stringify(e));const n=(t=t||"svg"===e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag):document.createElement(e.tag);return f(n,e.props),e.children&&e.children.forEach(e=>n.appendChild(g(e,t))),n}function f(e,t){console.assert(!!e),t=function(e,t){t.class=t.class||t.className,delete t.className;const n={};return e&&Object.keys(e).forEach(e=>n[e]=null),t&&Object.keys(t).forEach(e=>n[e]=t[e]),n}(e[l]||{},t||{}),e[l]=t;for(const n in t){const r=t[n];if("style"===n){e.style.cssText&&(e.style.cssText="");for(const t in r)e.style[t]!==r[t]&&(e.style[t]=r[t])}else if(n.startsWith("data-")){const t=n.substring(5).replace(/-(\w)/g,e=>e[1].toUpperCase());e.dataset[t]!==r&&(r||""===r?e.dataset[t]=r:delete e.dataset[t])}else"id"===n||"class"===n||n.startsWith("role")||n.indexOf("-")>0||e instanceof SVGElement?e.getAttribute(n)!==r&&(r?e.setAttribute(n,r):e.removeAttribute(n)):e[n]!==r&&(e[n]=r);"key"===n&&r&&(u[r]=e)}}const b=(e,t={})=>(class extends HTMLElement{constructor(){super()}get component(){return this._component}get state(){return this._component.state}static get observedAttributes(){return Object.assign({},t).observedAttributes}connectedCallback(){if(this.isConnected&&!this._component){const n=Object.assign({render:!0,shadow:!1},t);this._shadowRoot=n.shadow?this.attachShadow({mode:"open"}):this;const r={};Array.from(this.attributes).forEach(e=>r[e.name]=e.value);const s=this.children?Array.from(this.children):[];s.forEach(e=>e.parentElement.removeChild(e)),this._component=new e(Object.assign({},r,{children:s})).mount(this._shadowRoot,n),this._component.mounted&&this._component.mounted(r,s),this.on=this._component.on.bind(this._component),this.run=this._component.run.bind(this._component)}}disconnectedCallback(){this._component.unmount(),this._component=null}attributeChangedCallback(...e){this._component&&this._component.run("attributeChanged",...e)}});var y=(e,t,n)=>{"undefined"!=typeof customElements&&customElements.define(e,b(t,n))};const v={meta:new WeakMap,defineMetadata(e,t,n){this.meta.has(n)||this.meta.set(n,{}),this.meta.get(n)[e]=t},getMetadataKeys(e){return e=Object.getPrototypeOf(e),this.meta.get(e)?Object.keys(this.meta.get(e)):[]},getMetadata(e,t){return t=Object.getPrototypeOf(t),this.meta.get(t)?this.meta.get(t)[e]:null}};function E(e,t={}){return function(n,r){const s=e?e.toString():r;v.defineMetadata(`apprun-update:${s}`,{name:s,key:r,options:t},n)}}const k=(e,t)=>(t?e.state[t]:e.state)||"",w=(e,t,n)=>{if(t){const r=Object.assign({},e.state);r[t]=n,e.setState(r)}else e.setState(n)};var _=(e,t,n,r)=>{if(e.startsWith("$on")){const n=t[e];if(e=e.substring(1),"boolean"==typeof n)t[e]=t=>r.run(e,t);else if("string"==typeof n)t[e]=e=>r.run(n,e);else if("function"==typeof n)t[e]=e=>r.setState(n(r.state,e));else if(Array.isArray(n)){const[s,...a]=n;"string"==typeof s?t[e]=e=>r.run(s,...a,e):"function"==typeof s&&(t[e]=e=>r.setState(s(r.state,...a,e)))}}else if("$bind"===e){const s=t.type||"text",a="string"==typeof t[e]?t[e]:t.name;if("input"===n)switch(s){case"checkbox":t.checked=k(r,a),t.onclick=e=>w(r,a||e.target.name,e.target.checked);break;case"radio":t.checked=k(r,a)===t.value,t.onclick=e=>w(r,a||e.target.name,e.target.value);break;case"number":case"range":t.value=k(r,a),t.oninput=e=>w(r,a||e.target.name,Number(e.target.value));break;default:t.value=k(r,a),t.oninput=e=>w(r,a||e.target.name,e.target.value)}else"select"===n?(t.value=k(r,a),t.onchange=e=>{e.target.multiple||w(r,a||e.target.name,e.target.value)}):"option"===n&&(t.selected=k(r,a),t.onclick=e=>w(r,a||e.target.name,e.target.selected))}else i.run("$",{key:e,tag:n,props:t,component:r})};const x={};i.on("get-components",e=>e.components=x);const N=e=>e;class O{constructor(e,t,n,s){this.state=e,this.view=t,this.update=n,this.options=s,this._app=new r,this._actions=[],this._global_events=[],this._history=[],this._history_idx=-1,this._history_prev=()=>{this._history_idx--,this._history_idx>=0?this.setState(this._history[this._history_idx],{render:!0,history:!1}):this._history_idx=0},this._history_next=()=>{this._history_idx++,this._history_idx<this._history.length?this.setState(this._history[this._history_idx],{render:!0,history:!1}):this._history_idx=this._history.length-1},this.start=(e=null,t={render:!0})=>this.mount(e,Object.assign({},t,{render:!0}))}render(e,t){i.render(e,t,this)}_view(e,t=null){if(!this.view)return;const n=i.createElement;i.createElement=(e,t,...r)=>(t&&Object.keys(t).forEach(n=>{n.startsWith("$")&&(_(n,t,e,this),delete t[n])}),n(e,t,...r));const r=t?this.view(e,t):this.view(e);return i.createElement=n,r}renderState(e){if(!this.view)return;const t=this._view(e);if(i.debug&&i.run("debug",{component:this,state:e,vdom:t||"[vdom is null - no render]"}),"object"!=typeof document)return;const n="string"==typeof this.element?document.getElementById(this.element):this.element;if(n){const e="_c";if(this.unload){if(n._component!==this&&(this.tracking_id=(new Date).valueOf().toString(),n.setAttribute(e,this.tracking_id),"undefined"!=typeof MutationObserver)){const t=new MutationObserver(e=>{const{removedNodes:r,oldValue:s}=e[0];(s===this.tracking_id||Array.from(r).indexOf(n)>=0)&&(this.unload(this.state),t.disconnect())});n.parentNode&&t.observe(n.parentNode,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[e]})}}else n.removeAttribute&&n.removeAttribute(e);n._component=this}this.render(n,t),this.rendered&&this.rendered(this.state)}setState(e,t={render:!0,history:!1}){if(e instanceof Promise)e.then(e=>{this.setState(e,t)}).catch(e=>{throw console.error(e),e}),this._state=e;else{if(this._state=e,null==e)return;this.state=e,!1!==t.render&&this.renderState(e),!1!==t.history&&this.enable_history&&(this._history=[...this._history,e],this._history_idx=this._history.length-1),"function"==typeof t.callback&&t.callback(this.state)}}mount(e=null,t){return console.assert(!this.element,"Component already mounted."),this.options=t=Object.assign({},this.options,t),this.element=e,this.global_event=t.global_event,this.enable_history=!!t.history,this.enable_history&&(this.on(t.history.prev||"history-prev",this._history_prev),this.on(t.history.next||"history-next",this._history_next)),this.add_actions(),void 0===this.state&&(this.state=null!=this.model?this.model:{}),t.render?this.setState(this.state,{render:!0,history:!0}):this.setState(this.state,{render:!1,history:!0}),x[e]=x[e]||[],x[e].push(this),this}is_global_event(e){return e&&(this.global_event||this._global_events.indexOf(e)>=0||e.startsWith("#")||e.startsWith("/")||e.startsWith("@"))}add_action(e,t,n={}){t&&"function"==typeof t&&(n.global&&this._global_events.push(e),this.on(e,(...r)=>{const s=t(this.state,...r);i.debug&&i.run("debug",{component:this,event:e,e:r,state:this.state,newState:s,options:n}),this.setState(s,n)},n))}add_actions(){const e=this.update||{};v.getMetadataKeys(this).forEach(t=>{if(t.startsWith("apprun-update:")){const n=v.getMetadata(t,this);e[n.name]=[this[n.key].bind(this),n.options]}});const t={};Array.isArray(e)?e.forEach(e=>{const[n,r,s]=e;n.toString().split(",").forEach(e=>t[e.trim()]=[r,s])}):Object.keys(e).forEach(n=>{const r=e[n];("function"==typeof r||Array.isArray(r))&&n.split(",").forEach(e=>t[e.trim()]=r)}),t["."]||(t["."]=N),Object.keys(t).forEach(e=>{const n=t[e];"function"==typeof n?this.add_action(e,n):Array.isArray(n)&&this.add_action(e,n[0],n[1])})}run(e,...t){const n=e.toString();return this.is_global_event(n)?i.run(n,...t):this._app.run(n,...t)}on(e,t,n){const r=e.toString();return this._actions.push({name:r,fn:t}),this.is_global_event(r)?i.on(r,t,n):this._app.on(r,t,n)}unmount(){this._actions.forEach(e=>{const{name:t,fn:n}=e;this.is_global_event(t)?i.off(t,n):this._app.off(t,n)})}}O.t=!0;const $=e=>{if(e||(e="#"),e.startsWith("#")){const[t,...n]=e.split("/");i.run(t,...n)||i.run("///",t,...n),i.run("//",t,...n)}else if(e.startsWith("/")){const[t,n,...r]=e.split("/");i.run("/"+n,...r)||i.run("///","/"+n,...r),i.run("//","/"+n,...r)}else i.run(e)||i.run("///",e),i.run("//",e)};i.createElement=function(e,t,...n){const r=c(n);if("string"==typeof e)return{tag:e,props:t,children:r};if(Array.isArray(e))return e;if(void 0===e&&n)return r;if(Object.getPrototypeOf(e).t)return{tag:e,props:t,children:r};if("function"==typeof e)return e(t,r);throw new Error(`Unknown tag in vdom ${e}`)},i.render=function(e,t,n){m(e,t,n)},i.Fragment=function(e,...t){return c(t)},i.webComponent=y,i.start=(e,t,n,r,s)=>{const a=Object.assign({},s,{render:!0,global_event:!0}),i=new O(t,n,r);return s&&s.rendered&&(i.rendered=s.rendered),i.mount(e,a),i};const j=e=>{};i.on("$",j),i.on("debug",e=>j),i.on("//",j),i.on("#",j),i.route=$,i.on("route",e=>i.route&&i.route(e)),"object"==typeof document&&document.addEventListener("DOMContentLoaded",()=>{i.route===$&&(window.onpopstate=()=>$(location.hash),$(location.hash))}),"object"==typeof window&&(window.Component=O,window.React=i),t.b=i}).call(this,n(2))},function(e,t,n){(function(t){!function(t){"use strict";var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:f,table:f,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||w.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.rules=n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=h(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d{1,9}\.)/,n.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,n.item=h(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=h(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=h(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=h(n._paragraph).replace("hr",n.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",n._tag).getRegex(),n.blockquote=h(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=b({},n),n.gfm=b({},n.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=b({},n.normal,{html:h("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:f,paragraph:h(n.normal._paragraph).replace("hr",n.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",n.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),r.rules=n,r.lex=function(e,t){return new r(t).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t){var r,s,a,i,o,l,c,m,h,p,d,g,f,b,E,k;for(e=e.replace(/^ +$/gm,"");e;)if((a=this.rules.newline.exec(e))&&(e=e.substring(a[0].length),a[0].length>1&&this.tokens.push({type:"space"})),a=this.rules.code.exec(e)){var w=this.tokens[this.tokens.length-1];e=e.substring(a[0].length),w&&"paragraph"===w.type?w.text+="\n"+a[0].trimRight():(a=a[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?a:v(a,"\n")}))}else if(a=this.rules.fences.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"code",lang:a[2]?a[2].trim():a[2],text:a[3]||""});else if(a=this.rules.heading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:a[1].length,text:a[2]});else if((a=this.rules.nptable.exec(e))&&(l={type:"table",header:y(a[1].replace(/^ *| *\| *$/g,"")),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3]?a[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(a[0].length),d=0;d<l.align.length;d++)/^ *-+: *$/.test(l.align[d])?l.align[d]="right":/^ *:-+: *$/.test(l.align[d])?l.align[d]="center":/^ *:-+ *$/.test(l.align[d])?l.align[d]="left":l.align[d]=null;for(d=0;d<l.cells.length;d++)l.cells[d]=y(l.cells[d],l.header.length);this.tokens.push(l)}else if(a=this.rules.hr.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"hr"});else if(a=this.rules.blockquote.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"blockquote_start"}),a=a[0].replace(/^ *> ?/gm,""),this.token(a,t),this.tokens.push({type:"blockquote_end"});else if(a=this.rules.list.exec(e)){for(e=e.substring(a[0].length),c={type:"list_start",ordered:b=(i=a[2]).length>1,start:b?+i:"",loose:!1},this.tokens.push(c),m=[],r=!1,f=(a=a[0].match(this.rules.item)).length,d=0;d<f;d++)p=(l=a[d]).length,~(l=l.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(p-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+p+"}","gm"),"")),d!==f-1&&(o=n.bullet.exec(a[d+1])[0],(i.length>1?1===o.length:o.length>1||this.options.smartLists&&o!==i)&&(e=a.slice(d+1).join("\n")+e,d=f-1)),s=r||/\n\n(?!\s*$)/.test(l),d!==f-1&&(r="\n"===l.charAt(l.length-1),s||(s=r)),s&&(c.loose=!0),k=void 0,(E=/^\[[ xX]\] /.test(l))&&(k=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),h={type:"list_item_start",task:E,checked:k,loose:s},m.push(h),this.tokens.push(h),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(f=m.length,d=0;d<f;d++)m[d].loose=!0;this.tokens.push({type:"list_end"})}else if(a=this.rules.html.exec(e))e=e.substring(a[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===a[1]||"script"===a[1]||"style"===a[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):u(a[0]):a[0]});else if(t&&(a=this.rules.def.exec(e)))e=e.substring(a[0].length),a[3]&&(a[3]=a[3].substring(1,a[3].length-1)),g=a[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[g]||(this.tokens.links[g]={href:a[2],title:a[3]});else if((a=this.rules.table.exec(e))&&(l={type:"table",header:y(a[1].replace(/^ *| *\| *$/g,"")),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3]?a[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(a[0].length),d=0;d<l.align.length;d++)/^ *-+: *$/.test(l.align[d])?l.align[d]="right":/^ *:-+: *$/.test(l.align[d])?l.align[d]="center":/^ *:-+ *$/.test(l.align[d])?l.align[d]="left":l.align[d]=null;for(d=0;d<l.cells.length;d++)l.cells[d]=y(l.cells[d].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(a=this.rules.lheading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:"="===a[2].charAt(0)?1:2,text:a[1]});else if(t&&(a=this.rules.paragraph.exec(e)))e=e.substring(a[0].length),this.tokens.push({type:"paragraph",text:"\n"===a[1].charAt(a[1].length-1)?a[1].slice(0,-1):a[1]});else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"text",text:a[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var s={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:f,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:f,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function a(e,t){if(this.options=t||w.defaults,this.links=e,this.rules=s.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=s.pedantic:this.options.gfm&&(this.options.breaks?this.rules=s.breaks:this.rules=s.gfm)}function i(e){this.options=e||w.defaults}function o(){}function l(e){this.tokens=[],this.token=null,this.options=e||w.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new c}function c(){this.seen={}}function u(e,t){if(t){if(u.escapeTest.test(e))return e.replace(u.escapeReplace,(function(e){return u.replacements[e]}))}else if(u.escapeTestNoEncode.test(e))return e.replace(u.escapeReplaceNoEncode,(function(e){return u.replacements[e]}));return e}function m(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}function h(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function p(e,t,n){if(e){try{var r=decodeURIComponent(m(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!g.test(n)&&(n=function(e,t){d[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?d[" "+e]=e+"/":d[" "+e]=v(e,"/",!0));return e=d[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}s._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",s.em=h(s.em).replace(/punctuation/g,s._punctuation).getRegex(),s._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,s._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,s._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,s.autolink=h(s.autolink).replace("scheme",s._scheme).replace("email",s._email).getRegex(),s._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,s.tag=h(s.tag).replace("comment",n._comment).replace("attribute",s._attribute).getRegex(),s._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,s._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,s._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,s.link=h(s.link).replace("label",s._label).replace("href",s._href).replace("title",s._title).getRegex(),s.reflink=h(s.reflink).replace("label",s._label).getRegex(),s.normal=b({},s),s.pedantic=b({},s.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",s._label).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",s._label).getRegex()}),s.gfm=b({},s.normal,{escape:h(s.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),s.gfm.url=h(s.gfm.url,"i").replace("email",s.gfm._extended_email).getRegex(),s.breaks=b({},s.gfm,{br:h(s.br).replace("{2,}","*").getRegex(),text:h(s.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),a.rules=s,a.output=function(e,t,n){return new a(t,n).output(e)},a.prototype.output=function(e){for(var t,n,r,s,i,o,l="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),l+=u(i[1]);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),e=e.substring(i[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]):i[0];else if(i=this.rules.link.exec(e)){var c=E(i[2],"()");if(c>-1){var m=4+i[1].length+c;i[2]=i[2].substring(0,c),i[0]=i[0].substring(0,m).trim(),i[3]=""}e=e.substring(i[0].length),this.inLink=!0,r=i[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],s=t[3]):s="":s=i[3]?i[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(i,{href:a.escapes(r),title:a.escapes(s)}),this.inLink=!1}else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){l+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),l+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),l+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),l+=this.renderer.codespan(u(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),l+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),l+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),r="@"===i[2]?"mailto:"+(n=u(this.mangle(i[1]))):n=u(i[1]),l+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.inRawBlock?l+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]):i[0]):l+=this.renderer.text(u(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===i[2])r="mailto:"+(n=u(i[0]));else{do{o=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(o!==i[0]);n=u(i[0]),r="www."===i[1]?"http://"+n:n}e=e.substring(i[0].length),l+=this.renderer.link(r,null,n)}return l},a.escapes=function(e){return e?e.replace(a.rules._escapes,"$1"):e},a.prototype.outputLink=function(e,t){var n=t.href,r=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,u(e[1]))},a.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},a.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,s=0;s<r;s++)t=e.charCodeAt(s),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},i.prototype.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var s=this.options.highlight(e,r);null!=s&&s!==e&&(n=!0,e=s)}return r?'<pre><code class="'+this.options.langPrefix+u(r,!0)+'">'+(n?e:u(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:u(e,!0))+"</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,n){if(null===(e=p(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+u(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},i.prototype.image=function(e,t,n){if(null===(e=p(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},o.prototype.strong=o.prototype.em=o.prototype.codespan=o.prototype.del=o.prototype.text=function(e){return e},o.prototype.link=o.prototype.image=function(e,t,n){return""+n},o.prototype.br=function(){return""},l.parse=function(e,t){return new l(t).parse(e)},l.prototype.parse=function(e){this.inline=new a(e.links,this.options),this.inlineText=new a(e.links,b({},this.options,{renderer:new o})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},l.prototype.next=function(){return this.token=this.tokens.pop(),this.token},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,m(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,s="",a="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});a+=this.renderer.tablerow(n)}return this.renderer.table(s,a);case"blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":a="";for(var i=this.token.ordered,o=this.token.start;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,i,o);case"list_item_start":a="";var l=this.token.loose,c=this.token.checked,u=this.token.task;for(this.token.task&&(a+=this.renderer.checkbox(c));"list_item_end"!==this.next().type;)a+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(a,u,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var h='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(h);console.log(h)}},c.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var n=t;do{this.seen[n]++,t=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},u.escapeTest=/[&<>"']/,u.escapeReplace=/[&<>"']/g,u.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,u.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var d={},g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function f(){}function b(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function y(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var r=!1,s=t;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function v(e,t,n){if(0===e.length)return"";for(var r=0;r<e.length;){var s=e.charAt(e.length-r-1);if(s!==t||n){if(s===t||!n)break;r++}else r++}return e.substr(0,e.length-r)}function E(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&--n<0)return r;return-1}function k(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function w(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null),k(t=b({},w.defaults,t||{}));var s,a,i=t.highlight,o=0;try{s=r.lex(e,t)}catch(e){return n(e)}a=s.length;var c=function(e){if(e)return t.highlight=i,n(e);var r;try{r=l.parse(s,t)}catch(t){e=t}return t.highlight=i,e?n(e):n(null,r)};if(!i||i.length<3)return c();if(delete t.highlight,!a)return c();for(;o<s.length;o++)!function(e){"code"!==e.type?--a||c():i(e.text,e.lang,(function(t,n){return t?c(t):null==n||n===e.text?--a||c():(e.text=n,e.escaped=!0,void(--a||c()))}))}(s[o])}else try{return t&&(t=b({},w.defaults,t)),k(t),l.parse(r.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||w.defaults).silent)return"<p>An error occurred:</p><pre>"+u(e.message+"",!0)+"</pre>";throw e}}f.exec=f,w.options=w.setOptions=function(e){return b(w.defaults,e),w},w.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new i,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},w.defaults=w.getDefaults(),w.Parser=l,w.parser=l.parse,w.Renderer=i,w.TextRenderer=o,w.Lexer=r,w.lexer=r.lex,w.InlineLexer=a,w.inlineLexer=a.output,w.Slugger=c,w.parse=w,e.exports=w}(this||"undefined"!=typeof window&&window)}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(0);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function s(e,t,n,r){var s,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,n,i):s(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function a(e,t,n,r){return new(n||(n=Promise))((function(s,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(i,o)}l((r=r.apply(e,t||[])).next())}))}class i extends r.a{constructor(){super(...arguments),this.state={},this.view=e=>{const t=e.user;return r.b.createElement("ul",{className:"nav navbar-nav pull-xs-right"},r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:"nav-link active",href:"#/"},"Home")),t&&r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:"nav-link",href:"#/editor"},r.b.createElement("i",{className:"ion-compose"})," New Post")),t&&r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:"nav-link",href:"#/settings"},r.b.createElement("i",{className:"ion-gear-a"})," Settings")),t?"":r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:"nav-link",href:"#/login"},"Sign In")),t?"":r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:"nav-link",href:"#/register"},"Sign Up")),t&&r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:"nav-link",href:`#/profile/${t.username}`},t.username)),t&&r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:"nav-link",href:"#/logout"},"Sign Out")))},this.setUser=(e,t)=>Object.assign(Object.assign({},e),{user:t})}}s([Object(r.c)("/set-user")],i.prototype,"setUser",void 0);(new i).start("header");let o=window&&window.localStorage&&window.localStorage.getItem("jwt")||"";function l(e){o=e,window.localStorage&&(e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt"))}function c(e,t,n){return a(this,void 0,void 0,(function*(){const r={"Content-Type":"application/json; charset=utf-8"};o&&(r.Authorization=`Token ${o}`);const s=yield window.fetch(`${defaultBasePath}${t}`,{method:e,headers:r,body:n&&JSON.stringify(n)});if(401===s.status)throw l(null),new Error("401");const a=yield s.json();if(!s.ok)throw a;return a}))}function u(e){return c("GET",e)}function m(e,t){return c("POST",e,t)}function h(e){return c("DELETE",e)}function p(e,t){return c("PUT",e,t)}function d(e){const t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function g(e){let t={};if("object"==typeof e&&"FORM"==e.nodeName)for(let n=0;n<e.elements.length;n++){const r=e.elements[n];if(r.name&&"file"!=r.type&&"reset"!=r.type&&"submit"!=r.type&&"button"!=r.type)if("select-multiple"==r.type){t[r.name]="";let s="";for(let t=0;t<e.elements[n].options.length;t++)r.options[t].selected&&(s+=r.options[t].value+";");";"===s.charAt(s.length-1)&&(t[r.name]=s.substring(0,s.length-1))}else("checkbox"!=r.type&&"radio"!=r.type||r.checked)&&(t[r.name]=r.value)}return t}window.defaultBasePath="https://conduit.productionready.io/api";const f={all:()=>u("/tags")},b={current:()=>o?u("/user"):null,signIn:e=>m("/users/login",{user:e}),register:e=>m("/users",{user:e}),save:e=>p("/user",{user:e}),authorized:()=>!!r.b.user||r.b.run("#/login")&&!1},y={search:e=>u(`/articles?${d(e)}`),feed:e=>u(`/articles/feed?${d(e)}`),get:e=>u(`/articles/${e}`),delete:e=>h(`/articles/${e}`),favorite:e=>m(`/articles/${e}/favorite`),unfavorite:e=>h(`/articles/${e}/favorite`),update:e=>p(`/articles/${e.slug}`,{article:e}),create:e=>m("/articles",{article:e})},v={create:(e,t)=>m(`/articles/${e}/comments`,{comment:t}),delete:(e,t)=>h(`/articles/${e}/comments/${t}`),forArticle:e=>u(`/articles/${e}/comments`)},E={get:e=>u(`/profiles/${e}`),follow:e=>m(`/profiles/${e}/follow`),unfollow:e=>h(`/profiles/${e}/follow`)};function k(e){const t=e.article,n=t.favorited?"btn-primary":"btn-outline-primary";return r.b.createElement("div",{className:"article-preview"},r.b.createElement("div",{className:"article-meta"},r.b.createElement("a",{href:t.author.image},r.b.createElement("img",{src:t.author.image})),r.b.createElement("div",{className:"info"},r.b.createElement("a",{href:`#/profile/${t.author.username}`,className:"author"},t.author.username),r.b.createElement("span",{className:"date"},new Date(t.updatedAt).toLocaleString())),r.b.createElement("button",{className:`btn btn-sm pull-xs-right ${n}`,onclick:n=>r.b.run("toggle-fav-article",t,e.component)},r.b.createElement("i",{className:"ion-heart"})," ",t.favoritesCount)),r.b.createElement("a",{href:`#/article/${t.slug}`,className:"preview-link"},r.b.createElement("h1",null,t.title),r.b.createElement("p",null,t.description),r.b.createElement("span",null,"Read more..."),r.b.createElement("ul",{className:"tag-list"},t.tagList.map(e=>r.b.createElement("li",{className:"tag-default tag-pill tag-outline"},r.b.createElement("a",{href:`#/tag/${e}`},e," "))))))}r.b.on("/get-user",()=>a(void 0,void 0,void 0,(function*(){try{const e=yield b.current();e&&r.b.run("/set-user",e.user)}catch(e){l(null),document.location.reload(!0)}}))),r.b.on("/set-user",e=>{r.b.user=e,l(e?e.token:null)}),r.b.on("/toggle-follow",(e,t)=>a(void 0,void 0,void 0,(function*(){if(!b.authorized())return;const n=e.following?yield E.unfollow(e.username):yield E.follow(e.username);t.run("update-follow",n.profile)}))),r.b.on("/toggle-fav-article",(e,t)=>a(void 0,void 0,void 0,(function*(){if(!b.authorized())return;const n=e.favorited?yield y.unfavorite(e.slug):yield y.favorite(e.slug);t.run("update-article",n.article)})));var w=function({articles:e,component:t}){return e.length?e.map(e=>r.b.createElement(k,{article:e,component:t})):r.b.createElement("div",{className:"article-preview"},"No articles are here... yet.")},_=function({max:e,selected:t,link:n}){const s=new Array(e).fill(0);return r.b.createElement("nav",null,r.b.createElement("ul",{className:"pagination"},s.map((e,s)=>r.b.createElement("li",{className:`page-item ${s+1===t?"active":""}`},r.b.createElement("a",{href:`${n}/${s+1}`,className:"page-link"},s+1)))))};const x=10,N=({tag:e})=>r.b.createElement("a",{href:`#/tag/${e}/1`,className:"tag-pill tag-default"},e);class O extends r.a{constructor(){super(...arguments),this.state={type:"",articles:[],tags:[],max:1,page:1},this.view=e=>{const t="tag"===e.type&&e.tag?`/${e.tag}`:"";return r.b.createElement("div",{className:"home-page"},r.b.createElement("div",{className:"banner"},r.b.createElement("div",{className:"container"},r.b.createElement("h1",{className:"logo-font"},"conduit"),r.b.createElement("p",null,"A place to share your knowledge."))),r.b.createElement("div",{className:"container page"},r.b.createElement("div",{className:"row"},r.b.createElement("div",{className:"col-md-9"},r.b.createElement("div",{className:"feed-toggle"},r.b.createElement("ul",{className:"nav nav-pills outline-active"},r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:`nav-link ${r.b.user?"":"disabled"} ${"feed"===e.type?"active":""}`,href:"#/feed"},"Your Feed")),r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:`nav-link ${""===e.type?"active":""}`,href:"#/"},"Global Feed")),e.tag?r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:`nav-link ${"tag"===e.type?"active":""}`,href:`#/tag/${e.tag}`},"#",e.tag)):"")),r.b.createElement(w,{articles:e.articles,component:this}),r.b.createElement(_,{max:Math.floor(e.max/x),selected:e.page,link:`#/${e.type}${t}`})),r.b.createElement("div",{className:"col-md-3"},r.b.createElement("div",{className:"sidebar"},r.b.createElement("p",null,"Popular Tags"),r.b.createElement("div",{className:"tag-list"},e.tags.map(e=>r.b.createElement(N,{tag:e}))))))))},this.updateState=(e,t,n,r)=>a(this,void 0,void 0,(function*(){try{let s=e.tags.length?{tags:e.tags}:yield f.all();n=parseInt(n)||1,r=r||e.tag;const a=x,i=(n-1)*x;let o;switch(t){case"feed":if(!b.authorized())return Object.assign(Object.assign({},e),{articles:[],max:0});o=yield y.feed({limit:a,offset:i});break;case"tag":o=yield y.search({tag:r,limit:a,offset:i});break;default:o=yield y.search({limit:a,offset:i})}return n=Math.min(n,Math.floor(o.articlesCount/x)+1),Object.assign(Object.assign({},e),{tags:s.tags,type:t,page:n,tag:r,articles:o.articles,max:o.articlesCount})}catch({errors:t}){return Object.assign(Object.assign({},e),{errors:t,articles:[],max:0})}})),this.root=(e,t)=>a(this,void 0,void 0,(function*(){return yield this.updateState(e,"",t)})),this.feed=(e,t)=>a(this,void 0,void 0,(function*(){return yield this.updateState(e,"feed",t)})),this.tag=(e,t,n)=>a(this,void 0,void 0,(function*(){return yield this.updateState(e,"tag",n,t)})),this.updateArticle=(e,t)=>(e.articles=e.articles.map(e=>e.slug===t.slug?t:e),e)}}s([Object(r.c)("#/")],O.prototype,"root",void 0),s([Object(r.c)("#/feed")],O.prototype,"feed",void 0),s([Object(r.c)("#/tag")],O.prototype,"tag",void 0),s([Object(r.c)("update-article")],O.prototype,"updateArticle",void 0);(new O).mount("my-app");var $=function({errors:e}){return r.b.createElement("ul",{className:"error-messages"},Object.keys(e).map(t=>r.b.createElement("li",null,`${t} ${e[t]}`)))};class j extends r.a{constructor(){super(...arguments),this.state={},this.view=e=>{if(e&&!(e instanceof Promise))return r.b.createElement("div",{className:"auth-page"},r.b.createElement("div",{className:"container page"},r.b.createElement("div",{className:"row"},r.b.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.b.createElement("h1",{className:"text-xs-center"},"Sign In"),r.b.createElement("p",{className:"text-xs-center"},r.b.createElement("a",{href:"#/register"},"Need an account?")),e.errors&&r.b.createElement($,{errors:e.errors}),r.b.createElement("form",{onsubmit:e=>this.run("sign-in",e)},r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",name:"email"})),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",name:"password"})),r.b.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right"},"Sign In"))))))},this.login=e=>Object.assign(Object.assign({},e),{messages:[],returnTo:document.location.hash}),this.logout=e=>{r.b.run("/set-user",null),document.location.hash="#/"},this.signIn=(e,t)=>a(this,void 0,void 0,(function*(){try{t.preventDefault();const n=yield b.signIn(g(t.target));r.b.run("/set-user",n.user);const s=(e.returnTo||"").replace(/\#\/login\/?/,"");s?(r.b.run("route",s),history.pushState(null,null,s)):document.location.hash="#/feed"}catch({errors:t}){return Object.assign(Object.assign({},e),{errors:t})}}))}}s([Object(r.c)("#/login")],j.prototype,"login",void 0),s([Object(r.c)("#/logout")],j.prototype,"logout",void 0),s([Object(r.c)("sign-in")],j.prototype,"signIn",void 0);(new j).mount("my-app");class S extends r.a{constructor(){super(...arguments),this.state={},this.view=e=>{if(e&&!(e instanceof Promise))return r.b.createElement("div",{className:"auth-page"},r.b.createElement("div",{className:"container page"},r.b.createElement("div",{className:"row"},r.b.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.b.createElement("h1",{className:"text-xs-center"},"Sign Up"),r.b.createElement("p",{className:"text-xs-center"},r.b.createElement("a",{href:"#/login"},"Have an account?")),e.errors&&r.b.createElement($,{errors:e.errors}),r.b.createElement("form",{onsubmit:e=>this.run("register",e)},r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Your Name",name:"username"})),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",name:"email"})),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",name:"password"})),r.b.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right"},"Sign up"))))))},this.register=(e,t)=>Object.assign(Object.assign({},e),{messages:t}),this.submitRegistration=(e,t)=>a(this,void 0,void 0,(function*(){try{t.preventDefault();const e=yield b.register(g(t.target));r.b.run("#user",e.user),r.b.run("route","#/")}catch({errors:t}){return Object.assign(Object.assign({},e),{errors:t})}}))}}s([Object(r.c)("#/register")],S.prototype,"register",void 0),s([Object(r.c)("register")],S.prototype,"submitRegistration",void 0);(new S).mount("my-app");const A=10;class C extends r.a{constructor(){super(...arguments),this.state={name:"",type:"articles",articles:[],page:1},this.view=e=>{const t=e.profile;if(t)return r.b.createElement("div",{className:"profile-page"},r.b.createElement("div",{className:"user-info"},r.b.createElement("div",{className:"container"},r.b.createElement("div",{className:"row"},r.b.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.b.createElement("img",{src:t.image,className:"user-img"}),r.b.createElement("h4",null,t.username),r.b.createElement("p",null,t.bio),r.b.createElement("button",{className:"btn btn-sm btn-outline-secondary action-btn",onclick:e=>r.b.run("/toggle-follow",t,this)},t.following?r.b.createElement("span",null,r.b.createElement("i",{className:"ion-minus-round"})," Unfollow ",t.username):r.b.createElement("span",null,r.b.createElement("i",{className:"ion-plus-round"})," Follow ",t.username)))))),r.b.createElement("div",{className:"container"},r.b.createElement("div",{className:"row"},r.b.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.b.createElement("div",{className:"articles-toggle"},r.b.createElement("ul",{className:"nav nav-pills outline-active"},r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:`nav-link ${"articles"===e.type?"active":""}`,href:`#/profile/${t.username}/articles/1`},"My Articles")),r.b.createElement("li",{className:"nav-item"},r.b.createElement("a",{className:`nav-link ${"favorites"===e.type?"active":""}`,href:`#/profile/${t.username}/favorites/1`},"Favorited Articles")))),r.b.createElement(w,{articles:e.articles,component:this}),r.b.createElement(_,{max:Math.floor(e.max/A),selected:e.page,link:`#/profile/${e.profile.username}/${e.type}`})))))},this.updateState=(e,t,n,r)=>a(this,void 0,void 0,(function*(){t=decodeURIComponent(t||e.name),n=n||e.type,r=parseInt(r)||e.page;let s=e;if(t!==e.name){const e=yield E.get(t);s=Object.assign(Object.assign({},s),{profile:e.profile})}if(t!==e.name||n!==e.type||r!==e.page){const e=A,a=(r-1)*e,i="favorites"===n?yield y.search({favorited:t,offset:a,limit:e}):yield y.search({author:t,offset:a,limit:e});s=Object.assign(Object.assign({},s),{name:t,type:n,page:r,articles:i.articles,max:i.articlesCount})}return s})),this.root=(e,t,n,r)=>this.updateState(e,t,n,r),this.updateArticle=(e,t)=>(e.articles=e.articles.map(e=>e.slug===t.slug?t:e),e),this.updateFollow=(e,t)=>Object.assign(Object.assign({},e),{profile:t})}}s([Object(r.c)("#/profile")],C.prototype,"root",void 0),s([Object(r.c)("update-article")],C.prototype,"updateArticle",void 0),s([Object(r.c)("update-follow")],C.prototype,"updateFollow",void 0);(new C).mount("my-app");var z=function({title:e,body:t,ok:n,cancel:s,onOK:a,onCancel:i}){return r.b.createElement("div",{className:"modal-open"},r.b.createElement("div",{className:"modal-dialog",role:"document"},r.b.createElement("div",{className:"modal-content"},r.b.createElement("div",{className:"modal-header"},r.b.createElement("h5",{className:"modal-title"},e,r.b.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onclick:e=>i(e)},r.b.createElement("span",{"aria-hidden":"true"},"×")))),r.b.createElement("div",{className:"modal-body"},r.b.createElement("p",null,t)),r.b.createElement("div",{className:"modal-footer"},s&&r.b.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onclick:e=>i(e)},s),"  ",r.b.createElement("button",{type:"button",className:"btn btn-primary",onclick:e=>a(e)},n)))),r.b.createElement("div",{className:"modal-backdrop show",onclick:e=>i(e)}))};class R extends r.a{constructor(){super(...arguments),this.state={},this.view=e=>{const t=e.user;if(t)return r.b.createElement("div",{className:"settings-page"},e.showModal?r.b.createElement(z,{title:"Confirmation",body:"Your settings has been updated successfully.",ok:"OK",cancel:"Cancel",onOK:e=>this.run("ok",e),onCancel:e=>this.run("cancel",e)}):"",r.b.createElement("div",{className:"container page"},r.b.createElement("div",{className:"row"},r.b.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},e.errors&&r.b.createElement($,{errors:e.errors}),r.b.createElement("h1",{className:"text-xs-center"},"Your Settings"),r.b.createElement("form",{onsubmit:e=>this.run("submit-settings",e)},r.b.createElement("fieldset",null,r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{className:"form-control",type:"text",placeholder:"URL of profile picture",name:"image",value:t.image})),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Your Name",name:"username",value:t.username})),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("textarea",{className:"form-control form-control-lg",rows:"8",placeholder:"Short bio about you",name:"bio"},t.bio)),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",name:"email",value:t.email})),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",name:"password",value:t.password})),r.b.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right"},"Update Settings")))))))},this.settings=e=>{if(b.authorized())return{user:r.b.user}},this.submitSettings=(e,t)=>a(this,void 0,void 0,(function*(){try{t.preventDefault();const e=g(t.target),n=yield b.save(e);return r.b.run("#user",n.user),{showModal:!0}}catch({errors:t}){return Object.assign(Object.assign({},e),{errors:t})}})),this.ok=e=>({showModel:!1})}}s([Object(r.c)("#/settings")],R.prototype,"settings",void 0),s([Object(r.c)("submit-settings")],R.prototype,"submitSettings",void 0),s([Object(r.c)("ok, cancel")],R.prototype,"ok",void 0);(new R).mount("my-app");class L extends r.a{constructor(){super(...arguments),this.state={},this.view=e=>{if(!r.b.user||!e.article)return;const t=e.article;return r.b.createElement("div",{className:"editor-page"},r.b.createElement("div",{className:"container page"},r.b.createElement("div",{className:"row"},r.b.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},e.errors&&r.b.createElement($,{errors:e.errors}),r.b.createElement("form",{onsubmit:e=>this.run("submit-article",e)},t.slug&&r.b.createElement("input",{type:"hidden",name:"slug",value:t.slug}),r.b.createElement("fieldset",null,r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Article Title",name:"title",value:t.title})),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{type:"text",className:"form-control",placeholder:"What's this article about?",name:"description",value:t.description})),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("textarea",{className:"form-control",rows:"8",placeholder:"Write your article (in markdown)",name:"body"},t.body)),r.b.createElement("fieldset",{className:"form-group"},r.b.createElement("input",{type:"text",className:"form-control",placeholder:"Enter tags",name:"tags",value:t.tagList.join(", ")}),r.b.createElement("div",{className:"tag-list"})),r.b.createElement("button",{className:"btn btn-lg pull-xs-right btn-primary",type:"submit"},"Publish Article")))))))},this.root=(e,t)=>a(this,void 0,void 0,(function*(){if(!b.authorized())return;let e;if(t){e=(yield y.get(t)).article}return{article:e=e||{title:"",description:"",body:"",tagList:[]}}})),this.submitArticle=(e,t)=>a(this,void 0,void 0,(function*(){try{t.preventDefault();const e=g(t.target);e.tagList=e.tags.split(",");const n=e.slug?yield y.update(e):yield y.create(e);document.location.hash=`#/article/${n.article.slug}`}catch({errors:t}){return Object.assign(Object.assign({},e),{errors:t})}}))}}s([Object(r.c)("#/editor")],L.prototype,"root",void 0),s([Object(r.c)("submit-article")],L.prototype,"submitArticle",void 0);(new L).mount("my-app");var P=n(1);function T({comment:e}){return r.b.createElement("div",{className:"card"},r.b.createElement("div",{className:"card-block"},r.b.createElement("p",{className:"card-text"},r.b.createElement("p",null,`_html:${P(e.body,{sanitize:!0})}`))),r.b.createElement("div",{className:"card-footer"},r.b.createElement("a",{className:"comment-author"},r.b.createElement("img",{src:e.author.image,className:"comment-author-img"}))," ",r.b.createElement("a",{className:"comment-author",href:`#/profile/${e.author.username}`},e.author.username),r.b.createElement("span",{className:"date-posted"},new Date(e.createdAt).toLocaleString()),r.b.user&&r.b.user.username===e.author.username?r.b.createElement("span",{className:"mod-options"},r.b.createElement("i",{className:"ion-trash-a",onclick:t=>r.b.run("/delete-comment",e)})):""))}var M=function({comments:e}){const t=r.b.user;return r.b.createElement("div",{className:"row"},r.b.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},t?r.b.createElement("form",{className:"card comment-form",onsubmit:e=>r.b.run("/new-comment",e)},r.b.createElement("div",{className:"card-block"},r.b.createElement("textarea",{className:"form-control",placeholder:"Write a comment...",rows:"3",name:"comment"})),r.b.createElement("div",{className:"card-footer"},t.image?r.b.createElement("img",{src:t.image,className:"comment-author-img"}):r.b.createElement("span",null,"@",t.username),r.b.createElement("button",{className:"btn btn-sm btn-primary",type:"submit"},"Post Comment"))):r.b.createElement("p",null,r.b.createElement("a",{href:`#/login/${document.location.hash}`},"Sign in")," or ",r.b.createElement("a",{href:"#/register"},"sign up")," to add comments on this article."),e.map(e=>r.b.createElement(T,{comment:e}))))};function D({article:e,component:t}){const n=e.favorited?"btn-primary":"btn-outline-primary",s=e.author.following?"btn-secondary":"btn-outline-secondary";return r.b.createElement("div",{className:"article-meta"},r.b.createElement("a",{href:e.author.image},r.b.createElement("img",{src:e.author.image})),r.b.createElement("div",{className:"info"},r.b.createElement("a",{href:`#/profile/${e.author.username}`,className:"author"},e.author.username),r.b.createElement("span",{className:"date"},new Date(e.updatedAt).toLocaleString())),r.b.user&&r.b.user.username===e.author.username?r.b.createElement("span",null,r.b.createElement("button",{className:"btn btn-sm btn-outline-secondary",onclick:n=>t.run("edit-article",e)},r.b.createElement("i",{className:"ion-edit"}),"  Edit Article"),"  ",r.b.createElement("button",{className:"btn btn-sm btn-outline-danger",onclick:n=>t.run("delete-article",e)},r.b.createElement("i",{className:"ion-trash-o"}),"  Delete Article")):r.b.createElement("span",null,r.b.createElement("button",{className:`btn btn-sm ${s}`,onclick:n=>r.b.run("/toggle-follow",e.author,t)},e.author.following?r.b.createElement("span",null,r.b.createElement("i",{className:"ion-minus-round"})," Unfollow ",e.author.username):r.b.createElement("span",null,r.b.createElement("i",{className:"ion-plus-round"})," Follow ",e.author.username)),"   ",r.b.createElement("button",{className:`btn btn-sm ${n}`,onclick:n=>r.b.run("/toggle-fav-article",e,t)},r.b.createElement("i",{className:"ion-heart"}),"  Favorite Post ",r.b.createElement("span",{className:"counter"},"(",e.favoritesCount,")"))))}class I extends r.a{constructor(){super(...arguments),this.state={article:null,comments:[]},this.view=e=>{const t=e.article;if(t)return r.b.createElement("div",{className:"article-page"},e.deleting?r.b.createElement(z,{title:"Delete Article",body:"Are you sure you want to delete this article?",ok:"Delete",cancel:"No",onOK:e=>this.run("ok-delete-article",e),onCancel:e=>this.run("cancel-delete-article",e)}):"",r.b.createElement("div",{className:"banner"},r.b.createElement("div",{className:"container"},r.b.createElement("h1",null,t.title),r.b.createElement(D,{article:t,component:this}))),r.b.createElement("div",{className:"container page"},r.b.createElement("div",{className:"row article-content"},r.b.createElement("div",{className:"col-md-12"},r.b.createElement("p",null,`_html:${P(t.body,{sanitize:!0})}`),r.b.createElement("div",{className:"tag-list"},r.b.createElement("br",null),t.tagList.map(e=>r.b.createElement("li",{className:"tag-default tag-pill tag-outline"},r.b.createElement("a",{href:`#/tag/${e}`},e," ")))))),r.b.createElement("hr",null),r.b.createElement("div",{className:"article-actions"},r.b.createElement(D,{article:t,component:this})),r.b.createElement(M,{comments:e.comments})))},this.root=(e,t)=>a(this,void 0,void 0,(function*(){let n=e.article,r=e.comments;if(!n||n.slug!==t){n=(yield y.get(t)).article,r=(yield v.forArticle(n.slug)).comments}return Object.assign(Object.assign({},e),{article:n,comments:r})})),this.newComment=(e,t)=>a(this,void 0,void 0,(function*(){try{t.preventDefault();const n=t.target.comment.value;if(!n)return;yield v.create(e.article.slug,{body:n});const r=yield v.forArticle(e.article.slug);return Object.assign(Object.assign({},e),{comments:r.comments})}catch({errors:t}){return Object.assign(Object.assign({},e),{errors:t})}})),this.deleteComment=(e,t)=>a(this,void 0,void 0,(function*(){yield v.delete(this.state.article.slug,t.id);const n=yield v.forArticle(e.article.slug);return Object.assign(Object.assign({},e),{comments:n.comments})})),this.updateArticle=(e,t)=>Object.assign(Object.assign({},e),{article:t}),this.updateFollow=(e,t)=>(e.article.author=t,e),this.editArticle=(e,t)=>{document.location.hash=`#/editor/${t.slug}`},this.deleteArticle=(e,t)=>Object.assign(Object.assign({},e),{deleting:!0}),this.okDelete=(e,t)=>(y.delete(e.article.slug),document.location.hash="#/",Object.assign(Object.assign({},e),{deleting:!1})),this.cancelDelete=(e,t)=>Object.assign(Object.assign({},e),{deleting:!1})}}s([Object(r.c)("#/article")],I.prototype,"root",void 0),s([Object(r.c)("/new-comment")],I.prototype,"newComment",void 0),s([Object(r.c)("/delete-comment")],I.prototype,"deleteComment",void 0),s([Object(r.c)("update-article")],I.prototype,"updateArticle",void 0),s([Object(r.c)("update-follow")],I.prototype,"updateFollow",void 0),s([Object(r.c)("edit-article")],I.prototype,"editArticle",void 0),s([Object(r.c)("delete-article")],I.prototype,"deleteArticle",void 0),s([Object(r.c)("ok-delete-article")],I.prototype,"okDelete",void 0),s([Object(r.c)("cancel-delete-article")],I.prototype,"cancelDelete",void 0);(new I).mount("my-app");r.b.on("#",(e,...t)=>{r.b.run(`#/${e||""}`,...t)}),r.b.run("/get-user")}]);
//# sourceMappingURL=app.js.map